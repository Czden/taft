import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import datetime as dt
import taft

hi = np.array([ 
	30.1983,30.2776,30.4458,29.3478,29.3477,29.2886,28.8334,28.7346,28.6654,28.8532,28.6356,27.6761,27.2112,26.8651,27.4090,26.9441,26.5189,26.5189,27.0927,27.6860,28.4477,28.5267,28.6654,29.0116,29.8720,29.8028,29.7529,30.6546,30.5951,30.7635,31.1698,30.8923,30.0402,30.6645
])

lo = np.array([ 
	29.4072,29.3182,29.9611,28.7443,28.5566,28.4081,28.0818,27.4289,27.6565,27.8345,27.3992,27.0927,26.1826,26.1332,26.6277,26.1332,25.4307,25.3518,25.8760,26.9640,27.1421,28.0123,27.8840,27.9928,28.7643,29.1402,28.7127,28.9290,30.0304,29.3863,30.1365,30.4267,29.3467,29.9906 
])

cl = np.array([
	29.8720,30.2381,30.0996,28.9028,28.9225,28.4775,28.5566,27.5576,28.4675,28.2796,27.4882,27.2310,26.3507,26.3309,27.0333,26.2221,26.0144,25.4605,27.0333,27.4487,28.3586,28.4278,27.9530,29.0116,29.3776,29.3576,28.9107,30.6149,30.0502,30.1890,31.1202,30.5356,29.7827,30.0402
])

hi = hi[::-1]
lo = lo[::-1]
cl = cl[::-1]
ratesLen = len(cl)

adx = []
for i in range( ratesLen ):
	adx.append( {} )

prev = None
for i in range( ratesLen-1, -1, -1 ):
	adx[i] = taft.adx( shift=i, hi=hi, lo=lo, cl=cl, prev=prev )
	if adx[i] == None:
		continue
	prev = adx[i]

for i in range( ratesLen-1,-1,-1 ):
	prefix = str(i) + ": " 
	if adx[i] == None:
		print prefix + "N/A"
	else:
		print prefix + "close=" + str(cl[i]) + ", +DM14=" + str(adx[i]['+DMsm']) + ", -DM14=" + str(adx[i]['-DMsm']) + ", +DI=" + str(adx[i]['+DI']) + ", -DI=" + str(adx[i]['-DI']) + ", dx=" + str(adx[i]['dx']) + ", ADX=" + str(adx[i]['adx'])
