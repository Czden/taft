import numpy as np
import taft

hi = np.array([
	48.7000,48.7200,48.9000,48.8700,48.8200,49.0500,49.2000,49.3500,49.9200,50.1900,50.1200,49.6600,49.8800,50.1900,50.3600,50.5700,50.6500,50.4300,49.6300,50.3300,50.2900,50.1700,49.3200,48.5000,48.3201,46.8000,47.8000,48.3900,48.6600,48.7900
])

lo = np.array([
	47.7900,48.1400,48.3900,48.3700,48.2400,48.6350,48.9400,48.8600,49.5000,49.8700,49.2000,48.9000,49.4300,49.7250,49.2600,50.0900,50.3000,49.2100,48.9800,49.6100,49.2000,49.4300,48.0800,47.6400,41.5500,44.2833,47.3100,47.2000,47.9000,47.7301
])

cl = np.array([
	48.1600,48.6100,48.7500,48.6300,48.7400,49.0300,49.0700,49.3200,49.9100,50.1300,49.5300,49.5000,49.7500,50.0300,50.3100,50.5200,50.4100,49.3400,49.3700,50.2300,49.2375,49.9300,48.4300,48.1800,46.5700,45.4100,47.7700,47.7200,48.6200,47.8500
])

hi = hi[::-1]
lo = lo[::-1]
cl = cl[::-1]
ratesLen = len(cl)

atr = np.zeros( shape=ratesLen, dtype='float' )
prev = None
for i in range( ratesLen-1, -1, -1 ):
	ret = taft.atr( shift=i, hi=hi, lo=lo, cl=cl, prev=prev )
	if ret is not None:
		atr[i] = ret['atr']
	prev = ret

for i in range( ratesLen-1, -1, -1 ):
	prefix = str(i) + ": " 
	print prefix + "rate=" + str(cl[i]) + ", atr=" + str(atr[i])
