import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import datetime as dt
import taft

op = np.array([
	23.9429,23.8534,23.9429,23.7342,23.5950,23.4559,23.5255,23.7342,24.0920,23.9528,23.9230,24.0423,23.8336,24.0522,24.8871,24.9467,24.9070,25.2449,25.1256,25.2648,24.7380,24.3603,24.4895,24.6982,24.6485,24.4796,24.4597,24.6187,23.8137,23.9131
])

hi = np.array([
	24.2013,24.0721,24.0423,23.8733,23.6745,23.5851,23.8037,23.8036,24.3007,24.1516,24.0522,24.0622,23.8833,25.1356,25.1952,25.0660,25.2151,25.3741,25.3642,25.2648,24.8175,24.4398,24.6485,24.8374,24.7479,24.5094,24.6784,24.6684,23.8435,24.3007
])

lo = np.array([
	23.8534,23.7242,23.6447,23.3664,23.4559,23.1776,23.3962,23.5652,24.0522,23.7739,23.5950,23.8435,23.6447,23.9429,24.7380,24.7678,24.8970,24.9268,24.9567,24.9268,24.2112,24.2112,24.4299,24.4398,24.2013,24.2510,24.2112,24.1516,23.6348,23.7640
])

cl = np.array([
	23.8932,23.9528,23.6745,23.7839,23.4956,23.3217,23.7540,23.7938,24.1417,23.8137,23.7839,23.8634,23.7044,24.9567,24.8771,24.9616,25.1753,25.0660,25.2747,24.9964,24.4597,24.2808,24.6237,24.5815,24.5268,24.3504,24.3404,24.2311,23.7640,24.2013
])


hi = hi[::-1]
lo = lo[::-1]
cl = cl[::-1]
ratesLen = len(cl)

cci = np.zeros( shape=ratesLen, dtype='float' )
meanTP = np.zeros( shape=ratesLen, dtype='float' )
meanD = np.zeros( shape=ratesLen, dtype='float' )
prev = None
for i in range( ratesLen-1, -1, -1 ):
	ret = taft.cci( shift=i, hi=hi, lo=lo, cl=cl )
	if ret != None:
		cci[i] = ret['cci']
		meanTP[i] = ret['meanTypicalPrice']
		meanD[i] = ret['meanDeviation']

for i in range( ratesLen-1, -1, -1 ):
	prefix = str(i) + ": " 
	print prefix + "rate=" + str(cl[i]) + ", cci=" + str(cci[i])  + ", meanTP=" + str(meanTP[i])  + ", meanD=" + str(meanD[i])
